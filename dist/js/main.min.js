const body=document.querySelector("body"),html=document.querySelector("html"),header=document.querySelector(".header");let checkNftSlider,windowSize;function resize(){windowSize=window.innerWidth,html.style.setProperty("--height-header",header.offsetHeight+"px")}resize(),window.onresize=resize,gsap.registerPlugin(ScrollTrigger),gsap.registerPlugin(TimelineMax);let tl=gsap.timeline();const animSection=document.querySelectorAll(".anim-section");let animSectionArray=[];function sortByIndex(e){return windowSize<980?e.sort((e,t)=>e.mobIndex>t.mobIndex?1:-1):e.sort((e,t)=>e.index>t.index?1:-1)}function animScroll(){Array.from(animSectionArray).forEach((e,t)=>{const n=e[0],i=n.getBoundingClientRect();window.innerHeight/1.5>i.top&&!n.classList.contains("_animated")&&(n.classList.add("_animated"),e[1].play())})}function timer(){let e;document.querySelectorAll(".timer").forEach(t=>{e=new Date(t.dataset.timerYear,Number(t.dataset.timerMonth-1),t.dataset.timerDay,t.dataset.timerHour,Number(t.dataset.timerMinute)+1);const n=t.querySelector(".timer-day"),i=t.querySelector(".timer-hour"),a=t.querySelector(".timer-minute"),r=e-new Date,o=r>0?Math.floor(r/1e3/60/60/24):0,l=r>0?Math.floor(r/1e3/60/60)%24:0,s=r>0?Math.floor(r/1e3/60)%60:0;n&&(n.textContent=o.toString()+"d"),i.textContent=l.toString()+"h",a.textContent=s.toString()+"m"})}animSection.forEach(e=>{const t=e.querySelectorAll(".anim-element");let n=[];t.forEach(e=>{const t=Number(e.dataset.index),i=Number(e.dataset.mobIndex)?Number(e.dataset.mobIndex):t;n.push({element:e,index:t,mobIndex:i})}),n=sortByIndex(n);let i=new TimelineMax;i.pause(),Array.from(n).forEach((t,n)=>{const a=Number(t.element.dataset.duration)?Number(t.element.dataset.duration):1,r=Number(t.element.dataset.delay)?Number(t.element.dataset.delay):0,o=Number(t.element.dataset.stagger)?Number(t.element.dataset.stagger):.05;if(t.element.classList.contains("anim-text")){let e=t.element.textContent.split(" ");t.element.innerHTML="";for(let n=0;n<e.length;n++)"*"==e[n].trim()[0]&&"*"==e[n].trim()[1]?e[n]=`<strong class="anim-text-word">${e[n].trim().split("**").join("")} </strong>`:"/"==e[n].trim()[0]&&"n"==e[n].trim()[1]?e[n]='<div style="padding: 3px 0"></div>':"/"==e[n].trim()[0]&&"b"==e[n].trim()[1]&&"r"==e[n].trim()[2]?e[n]="</br>":e[n]=`<span class="anim-text-word">${e[n].trim()} </span>`,t.element.insertAdjacentHTML("beforeend",e[n]);i.to(t.element,{opacity:1,duration:a,delay:r,onStart:function(){gsap.to(t.element.querySelectorAll(".anim-text-word"),{y:0,opacity:1,startAt:{y:50},duration:a,ease:"back.inOut(1.7)",stagger:o})}},0!=n&&"-=1")}else t.element.classList.contains("anim-fade-in")?i.to(t.element,{opacity:1,duration:a,delay:r},0!=n&&"-=1"):t.element.classList.contains("anim-fade-top")?i.to(t.element,{opacity:1,y:0,startAt:{y:50},duration:a,delay:r,onStart:function(){t.element.classList.contains("_has-slider")&&(checkNftSlider&&checkNftSlider.slideNext(2500),setTimeout(()=>{t.element.classList.add("_animated-slider")},200))}},0!=n&&"-=1"):t.element.classList.contains("anim-zoom-bottom")?i.to(t.element,{opacity:1,y:0,scale:1,startAt:{y:-100,scale:.9},duration:a,delay:r},0!=n&&"-=1"):t.element.classList.contains("anim-fade-right")?i.to(t.element,{opacity:1,y:0,x:0,startAt:{y:0,x:-100},duration:a,delay:r},0!=n&&"-=1"):t.element.classList.contains("anim-slider")?(i.to(t.element,{opacity:1,startAt:{opacity:0},duration:a,delay:r},0!=n&&"-=1"),gsap.to(t.element,{x:500>window.innerHeight/3?500:window.innerHeight/3,scrollTrigger:{trigger:e,start:"top center",end:"bottom -100px",scrub:!0}})):i.to(t.element,{opacity:1,duration:a,delay:r},0!=n&&"-=1")}),e.style.opacity=1,animSectionArray.push([e,i])}),animScroll(),window.addEventListener("scroll",animScroll),gsap.to(header,{opacity:1,duration:1,delay:.2}),timer(),setInterval(()=>{timer()},1e3);